# 伺かプラグイン「GhostSpeaker」

- SSPで動作確認

## 何をするもの？
音声合成エンジンを利用して、ゴーストの台詞を読み上げることができるプラグインです。  
現在対応している音声合成エンジンは、

- COEIROINK(v1.x.x)
- COEIROINK(v2.x.x)
- ITVOICE
- LMROID
- SHAREVOX
- VOICEVOX
- AivisSpeech
- 棒読みちゃん

です。

## どうやって使うの？
プラグインをインストール後、対応する音声合成エンジンを起動してください。例えば、COEIROINKの場合は`COEIROINKv2.exe`もしくは`engine/engine.exe`を起動します。

エンジンの準備が完了すると、「COEIROINK が接続されました」というOS通知がされます。
また、プラグイン実行時のメニューでエンジンが"起動中"となっていることを確認してください。
デフォルトでは読み上げ声質は"無し"となっており、そのままでは読み上げられません。
メニューから、**起動中の**エンジンで利用可能な声質が選択可能です。（起動中のエンジンがない場合、選択可能な声質はありません。）
エンジンの準備が完了し次第、ゴーストの台詞が読み上げられるようになります。

## インストール方法
ゴーストのインストールと同様に、本プラグインのnarファイルを起動中のゴーストにドラッグ＆ドロップしてください。  

## 設定項目

### 音量調整(共通)
読み上げ時の音量調整が可能です。  
ただし、現在は棒読みちゃんのみ非対応です。棒読みちゃん本体側の音量調節をお使いください。

### 句読点ごとに読み上げ(共通)
通常、読み上げ時はトーク全体をひとまとめにして音声合成を行います(本設定がオフ)が、
基本的には句読点で区切って一文ごとに合成する(本設定がオン)ほうが読み始めるまでの時間が短くなります。  
お好みで切り替えが可能です。

### 改行で一拍置く(ゴースト別)
ゴーストによっては、トークに句読点を使わず、改行のみで文を区切っているものがあります。  
しかし、GhostSpeakerでは改行は無視されるため、そのままでは各文が連結して読み上げられてしまいます。  
そこで本設定をオンにすることで改行を句読点とみなし、区切りながら読み上げさせることが可能です。

### 読み上げに文章表示を合わせる(ゴースト別)
有効にすると、読み上げ音声の進行に合わせてセリフをバルーンに表示します。
ただし、棒読みちゃんは非対応です。
また、以下のイベントではベースウェアの終了・切り替え等の動作を妨げないため、
同期モードを使用せず通常の非同期読み上げが適用されます。
- OnClose
- OnCloseAll
- OnGhostChanging
- OnGhostCalling
- OnShellChanging
- OnWindowStateMinimize
- OnFullScreenAppMinimize
- OnCacheSuspend
- OnVanishSelecting
- OnVanishSelected

### 各音声合成エンジンの自動起動
各エンジンについて、プラグイン起動時に自動起動するかどうかを設定できます。
エンジンを接続すると実行ファイルのパスが保存され、メニューから自動起動の有効/無効を切り替えられます。

### キャラクター別音声調整(ゴースト別)
キャラクターごとに以下の音声パラメータを調整できます。
- 話速: 0.50～2.00（調整間隔: 0.05）
- 音高: -0.15～+0.15（調整間隔: 0.01）
- 抑揚: 0.00～2.00（調整間隔: 0.05）
メニューから声質を設定済みのキャラクターに対して「音声調整」から設定が可能です。
ただし、棒読みちゃんは非対応です。

### デフォルト声質(共通)
ゴーストごとの声質が`未設定`の場合に使用する声質を指定します。  
これを指定することで、初回起動からゴーストのトークを読み上げることが可能になります。
